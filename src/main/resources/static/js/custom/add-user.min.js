var selectedGroupsIds=[];var selectedGroupsNames=[];genNavigation("user");$(document).ready(function(){$("#master-data-menu-left").removeClass("kt-menu__item--open");$("#dashboard-menu-left").removeClass("kt-menu__item--open");$("#workflow-menu-left").removeClass("kt-menu__item--open");$("#btnAddNewUser").on("click",function(){$(".selecteddisplay").html("");selectedGroupsIds=[];selectedGroupsNames=[];$.each($('input[name="groupCheckboxes"]:checked'),function(){$(".selecteddisplay").append('<span data-text="" data-value="'+$(this).val()+'" class="selectchoice-tag">'+$(this).data("name")+'<button class= "selectchoice-button" type = "button" >x</button></div >');selectedGroupsIds.push($(this).val());selectedGroupsNames.push($(this).data("name"))});$('input[name="selectedGroupsIds[]"').val(selectedGroupsIds);a()});a();function a(){var b;$(".selectchoice-button").click(function(){this.closest(".selectchoice-tag").remove();b=$(this).parent().data("value");$('input[name="groupCheckboxes"][value='+b+"]").click()})}$(".kt-checkbox").click(function(b){b.stopPropagation()});setInputFilter(document.getElementById("mobileNo"),function(b){return/^\d*$/.test(b)})});var loadFile=function(d){var a=new FileReader();const c=d.target.files[0];var b=c.type;var e=["image/jpg","image/jpeg","image/png"];if($.inArray(b,e)<0){$("#invalidFileModal").modal()}else{a.onload=function(){var f=document.getElementById("imagePreview");f.src=a.result;f.style.display="block"};a.readAsDataURL(d.target.files[0]);$("#imagePreview").css("display","block")}};function prepareConfirmation(h){var a=$("#email").val().trim();var j=$("#fullName").val().trim();var c=false;if(a.length==0){$("#emailError").css("display","block");c=true}if(j.length==0){$("#fullNameError").css("display","block");c=true}if(selectedGroupsNames.length==0){$("#groupsError").css("display","block");c=true}if(!c){var g="";for(let i in selectedGroupsNames){g+=selectedGroupsNames[i]+", "}g=g.substring(0,g.length-2);var b="Active";if($('input[name="status"]:checked').val()==="N"){b="Inactive"}var f=$("#department").find(":selected").data("name");var d=$("#jobTitle").val()==0?"":$("#jobTitle").find(":selected").data("name");$("#emailConfirm").text($("#email").val());$("#fullNameConfirm").text($("#fullName").val());$("#userGroupConfirm").text(g);$("#departmentConfirm").text(f);$("#jobTitleConfirm").text(d);$("#mobileNoConfirm").text($("#mobileNo").val());$("#statusConfirm").text(b);$("#kt_modal_1").modal();$('input[name="selectedGroupsNames"]').val(g);$('input[name="selectedDepartmentName"]').val(f);$('input[name="selectedJobTitleName"]').val(d)}}function hideEmailError(){$("#emailError").css("display","none");$("#emailExistError").css("display","none");$("#emailFormatError").css("display","none")}function hideFullNameError(){$("#fullNameError").css("display","none")}function hideGroupsError(){$("#groupsError").css("display","none")}function checkExistingEmail(b){var a=$(b).val();var c=$("#userId").val();$.get("/nera/api/checkEmail",{emailEntered:a,isEdit:isEdit,userId:c},function(d){if(d=="true"){$("#emailExistError").css("display","block");$("#saveBtn").attr("disabled",true)}else{$("#saveBtn").removeAttr("disabled")}})}function validateEmail(b){var d=$(b).val();var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var a=c.test(String(d).toLowerCase());if(!a){$("#emailFormatError").css("display","block")}}function searchGroups(b){var a=$(b).val();if(a.length!=0){$('input[name="groupCheckboxes"]:not([data-name*="'+a+'" i] )').parent().css("display","none")}else{$('input[name="groupCheckboxes"]').parent().css("display","block")}}function setInputFilter(b,a){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(c){b.addEventListener(c,function(){if(a(this.value)){this.oldValue=this.value;this.oldSelectionStart=this.selectionStart;this.oldSelectionEnd=this.selectionEnd}else{if(this.hasOwnProperty("oldValue")){this.value=this.oldValue;this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)}}})})}function checkMobileNo(a){if($(a).val()!==""&&$(a).val().length<8){$("#mobileLengthError").css("display","block");$("#saveBtn").attr("disabled",true)}else{$("#mobileLengthError").css("display","none");$("#saveBtn").removeAttr("disabled")}};