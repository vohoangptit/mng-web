function openFile(c){var e=$("#FileUpload").get(0);var d=e.files;for(var b=0;b<d.length;b++){var a=new FileReader();a.self=this;a.name=d[b].name;a.type=d[b].type;a.onload=function(f){$("#getContenOfFile").html(this.result);$(".displayitem").html("");$(".displayitem").append("<span>"+this.name+"</span>")};a.readAsText(d[b])}}genNavigation("playbookapproved");$(document).ready(function(){$("#job-planning-menu-left").removeClass("kt-menu__item--open");$("#my-job-menu-left").removeClass("kt-menu__item--open");$("#job-management-menu-left").removeClass("kt-menu__item--open");$("#system-menu-left").removeClass("kt-menu__item--open");$("#dashboard-menu-left").removeClass("kt-menu__item--open");$("#workflow-menu-left").removeClass("kt-menu__item--open");d();function d(){let is=$("#getPlaybookid").val();if(is>0){var g={id:is};$.ajax({type:"GET",url:"/nera/playbook/api/get-by-id",data:g,contentType:"application/json",success:function(j){$("#pldGetPlaybookName").val(j.name);b(j.sourceUrl);$(".displayitem").attr("data-value",j.sourceUrl);var h=j.status;if(h=="NEW"){$(".staNew").removeClass("hideclass")}if(h=="DRAFT"){$(".staDra").removeClass("hideclass")}if(h=="APPROVED"){$(".staApp").removeClass("hideclass")}if(h=="REJECTED"){$(".staRej").removeClass("hideclass")}$("#pldNotes").val(j.note);if(j.playbookInput.length>0){$("#tblPlaybookInput").removeClass("hideclass");let get=j.playbookInput;for(let i=0;i<get.length;i++){let col1;let col2;let col3;if(get[i].type=="Text"){col1=get[i].type;col2=get[i].variable;col3=get[i].value}c(col1,col2,col3)}}$("#tblPlaybookOutput").unbind().removeClass("hideclass");if(j.playbookOutput.length>0){let outputList=j.playbookOutput;for(let i=0;i<outputList.length;i++){let variable=outputList[i].variable;let value=outputList[i].value;a(variable,value)}}},error:function(h){}})}}function c(j,h,g){$("#tblPlaybookInput > tbody:last").append('<tr class="textcen"><td>'+j+'</td><td style="text-align:center; max-width:10em; word-wrap: break-word">'+h+'</td><td style="text-align:center; max-width:10em; word-wrap: break-word">'+g+"</td></tr>")}function a(g,h){$("#tblPlaybookOutput").removeClass("hideclass");$("#tblPlaybookOutput > tbody:last").append('<tr class="notstandard"><td style="text-align:center; max-width:11em; word-wrap: break-word">'+g+'</td><td style="text-align:center; max-width:11em; word-wrap: break-word">'+h+"</td></tr>")}function b(g){if(g==""){return false}$("#getContenOfFile").load(g,function(j,h,k){if(h=="success"){console.log("Success: "+k.status+", "+k.statusText);$(".displayitem").append("<span>"+g.split("/").pop()+"</span>")}if(h=="error"){console.log("Error: "+k.status+", "+k.statusText)}})}$("#btnViewHistory").on("click",function(){window.location.href="/menu/masterdata/playbook/history/"+$("#getPlaybookid").val()});$("#btnApproved").on("click",function(){$("#kt_modal_App").modal("show")});$("#btnYesApp").on("click",function(){var g="APPROVED";var h=$("#appRemarks").val();f(g,h)});$("#btnReject").on("click",function(){$("#kt_modal_Rej").modal("show")});$("#btnYesRej").on("click",function(){var g="REJECTED";var h=$("#rejRemarks").val();f(g,h)});function f(h,k){$("#save-success").css("display","none");var j={id:$("#getPlaybookid").val(),remark:k,status:h};var g=[];g.push(j);$.ajax({type:"POST",url:"/nera/playbook/api/approved-or-rejected-playbook",data:JSON.stringify(g),contentType:"application/json",beforeSend:function(){},success:function(l){e();if(h==="APPROVED"){$("#save-success").append("Approved success")}else{$("#save-success").append("Rejected success")}$("#save-success").css("display","block");$("#save-success").alert();$("#save-success").delay(4000).hide(200);$("#kt_modal_Rej").modal("hide");$("#kt_modal_App").modal("hide");setTimeout(function(){window.location.href="../../playbook-approved"},2000)},error:function(l){}})}function e(){$.ajax({type:"GET",url:"/nera/playbook/api/count-approved-playbook",beforeSend:function(){},success:function(g){$(".setPlaybookApprovedCount").text("Playbook Approved ("+g+")")},error:function(g){}})}$("#btnBackToApp").on("click",function(){window.location.href="../../playbook-approved"})});