var idUpdate;function loadEmailTemplate(){$.ajax({type:"GET",url:"/nera/email-template/find-all",beforeSend:function(){},success:function(b){var a=b;$("#tblListing > tbody").html("");if(hasEditPermission){for(let i=0;i<a.length;i++){let no=i+1;let id=a[i].id;let name=a[i].templateName;let status;if(a[i].active){status='<button style="border-radius: 5px; border: 1px solid #1eb7ae; background-color: #1eb7ae;" disabled><span style="font-family: Poppins;color:white">Active</span></button>'}else{status='<button style="border-radius: 5px; border: 1px solid #7f7f7f; background-color: #7f7f7f;" disabled><span style="font-family: Poppins;color:white">InActive</span></button>'}generateEmailListingTable(no,id,name,status)}}else{for(let i=0;i<a.length;i++){let no=i+1;let id=a[i].id;let name=a[i].templateName;let status;if(a[i].active){status='<button style="border-radius: 5px; border: 1px solid #1eb7ae; background-color: #1eb7ae;" disabled><span style="font-family: Poppins;color:white">Active</span></button>'}else{status='<button style="border-radius: 5px; border: 1px solid #7f7f7f; background-color: #7f7f7f;" disabled><span style="font-family: Poppins;color:white">InActive</span></button>'}generateEmailListingTableNoEdit(no,id,name,status)}}},error:function(a){}})}function generateEmailListingTable(c,d,b,a){$("#tblListing > tbody:last").append('<tr class=""><td class="assignindex">'+c+'</td><td class="tdHostName" data-id="'+d+'">'+b+'</td><td class="tdStatus">'+a+'</td><td><span><a data-id="'+d+'" href="#" onclick="return detailEmailTemplate('+d+');" class="btn btn-hover-brand btn-icon btn-pill hostEditRow"><i class="la la-pencil"></i></a></span></td></tr>')}function generateEmailListingTableNoEdit(c,d,b,a){$("#tblListing > tbody:last").append('<tr class=""><td class="assignindex">'+c+'</td><td class="tdHostName" data-id="'+d+'">'+b+'</td><td class="tdStatus">'+a+"</td><td></td></tr>")}function detailEmailTemplate(a){idUpdate=a;$.ajax({type:"GET",url:"/nera/email-template/find-by-id?id="+a,beforeSend:function(){},success:function(e){$("#pldEmailTemplateName").val(e.templateName);$("#pldEmailSubject").val(e.subject);$("#tblEmailVariable > tbody").html("");for(var c=0;c<e.emailTemplateVariable.length;c++){var b=e.emailTemplateVariable[c].name;var d=e.emailTemplateVariable[c].description;appendVariableEmailTemplate(b,d)}CKEDITOR.instances.txtContent.setData(e.templateContent)},error:function(b){}});$("#listingEmailTab").addClass("hideclass");$("#detailEmailTab").removeClass("hideclass")}function appendVariableEmailTemplate(a,b){$("#tblEmailVariable > tbody:last").append('<tr class="notstandard"><td class="outPutResize">'+a+'</td><td class="outPutResize">'+b+"</td></tr>")}$(document).ready(function(){$("#emailKeySearch").keyup(function(){var a=$("#emailKeySearch").val();searchEmailTemplate(a)});$("#btnBackListingEmail").on("click",function(){loadEmailTemplate();$("#detailEmailTab").addClass("hideclass");$("#listingEmailTab").removeClass("hideclass")});$("#btnUpdateEmailTemplate").unbind().on("click",function(){var d=CKEDITOR.instances.txtContent.getData();var b=$("#pldEmailTemplateName").val();var c=$("#pldEmailSubject").val();var a={id:idUpdate,templateContent:d,templateName:b,subject:c};$.ajax({type:"POST",url:"/nera/email-template/update",data:JSON.stringify(a),contentType:"application/json",beforeSend:function(){},success:function(e){loadEmailTemplate();$("#detailEmailTab").addClass("hideclass");$("#listingEmailTab").removeClass("hideclass")},error:function(e){}})})});function searchEmailTemplate(b){var a={searchString:b};$.ajax({type:"GET",url:"/nera/email-template/find-all",data:a,beforeSend:function(){},success:function(g){var f=g;$("#tblListing > tbody").html("");for(var e=0;e<f.length;e++){var h=e+1;var j=f[e].id;var d=f[e].templateName;var c=f[e].active==false?"Inactive":"Active";generateEmailListingTable(h,j,d,c)}},error:function(c){}})}function checkExistingTemplateName(b){var a=$(b).val().trim();$.get("/nera/email-template/validatedName",{templateName:a,id:idUpdate},function(c){if(c==true){$("#existNameError").css("display","block");$("#btnUpdateEmailTemplate").attr("disabled",true)}else{$("#btnUpdateEmailTemplate").removeAttr("disabled")}})}function checkNameEmpty(a){var b=$(a).val().trim();if(b==""){$("#emptyNameError").css("display","block")}}function hideNameError(){$("#emptyNameError").css("display","none");$("#existNameError").css("display","none")}function hideSubjectError(){$("#emptySubjectError").css("display","none")}function checkSubjectEmpty(a){var b=$(a).val().trim();if(b==""){$("#emptySubjectError").css("display","block")}}function reset(){$("#emailKeySearch").val("");loadEmailTemplate()};