<div th:replace="common/header"></div>

<link th:href="@{/css/custom/playbook/playbook-details.css}"
	href="../../css/custom/playbook/playbook-details.css" rel="stylesheet"
	type="text/css" />

<script th:src="@{/js/custom/playbook-history-details.js}" type="text/javascript"></script>
<div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor">
	<div style="padding: 0% 0% 0% 2%;">
            <label style="margin:1% 0% 0% 0.5%">
				<span style="font-weight:600; font-size:20px; color:#333333">Playbook</span>
				<span style="font-weight:100; font-size:25px; color:#686868;">&nbsp|&nbsp</span>
			</label>                      
			<label style="margin:2% 0% 0% 0.5%">
				<span> Home</span>
	            <span> &nbsp &gt; &nbsp</span>
				<span> Master Data</span>
				<span> &nbsp &gt; &nbsp</span>
				<span> Playbook Management</span>
				<span> &nbsp &gt; &nbsp</span>
				<span style="color: #e1261c;"> Detail</span>
			</label>
	</div>
	<!-- begin:: Content -->
	<div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content">

<div class="alert alert-light alert-elevate row fullheight">
	<div th:replace="custom/status/status"></div>
    <div class="col-md-12 row">
        <div class="col-md-8">
        	<div class="form-group row hideclass displaymessage">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-6">
                    <div class="alert alert-success" role="alert">
                        <div class="alert-text hideclass deletemess">Delete successfully</div>
                        <div class="alert-text hideclass updatemess">Update successfully</div>
                    </div>
                </div>
            </div>
        
     	    <div class="form-group row hideclass">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-6">
                    <input id="playbookHistoryId" th:value="${playbookHistoryId}">
                    <input id="playbookId" type="hidden">
                </div>
            </div>
        
            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label">Playbook Name<span class="redmarker">*</span></label>
                <div class="col-6">
                    <input class="form-control" type="text" value="" id="pldGetPlaybookName" disabled>
                    <div class="hideclass nameRequired"><label class="redmarker">Playbook Name is required</label></div>
                </div>
            </div>

            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-9 row">
                    <div class="displayitem col-8" data-value=""></div>
                </div>
            </div>
            
            <div class="form-group row hideclass uploadRequired">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-9 row">
                	<div>
                		<label class="col-md-12 redmarker">Upload playbook is required and the system only support to upload file with extension: .yml</label>
                	</div>
                </div>
            </div>

            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label">Playbook Content</label>
                <div class="col-9">
                    <textarea class="form-control" readonly="" rows="3" id="getContenOfFile" style="min-height: 200px; background: #f8f8f8"></textarea>
                </div>
            </div>

            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-9">

                    <table class="table" id="tblPlaybookInput" style="border:1px solid #ccc!important">
                        <caption class="d-none"></caption>
                        <thead style="background: lightgray">
                            <tr>
                                <th scope="col" style="width:20%" class="textcen">Input Type</th>
                                <th scope="col" style="width:20%" class="textcen">Variable</th>
                                <th scope="col" style="width:30%" class="textcen">Value</th>
                                <th scope="col" style="width:10%" class="textcen">Mandatory</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
					<div class="col-md-9 hideclass" id="spErrorInput">
						<span class="text-danger">* Variable or value cannot empty</span>
            		</div>
                </div>
            </div>
            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label">Playbook Output</label>
                <div class="col-9">
                    <label for="example-text-input" class="col-12 col-form-label">
                        <span class="la la-info-circle"></span>
                        For playbook output system will auto capture output <span class="textbold">variable - value</span> in Playbook content with systax: <span class="textbold">msg: "variable_name = value"</span>
                    </label>
                </div>
            </div>
            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label"></label>
                <div class="col-9">

                    <table class="table hideclass" id="tblPlaybookOutput" style="border:1px solid #ccc!important">
                        <caption class="d-none"></caption>
                        <thead style="background:#ccc!important">
                            <tr>
                                <th scope="col" style="width: 50%" class="text-center">Variable</th>
                                <th scope="col" style="width: 50%" class="text-center">Value</th>
                            </tr>
                        </thead>
                        <tbody>
                        	<tr class="standard">
                        	</tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group row hideclass layCreate">
                <label for="example-text-input" class="col-3 col-form-label">Status</label>
                <div class="col-9 forstatus" data-value="">
                    <span class="staNew kt-badge kt-badge--primary kt-badge--rounded statussize hideclass" style="background: #d9a747;">New</span>
                    <span class="staDra kt-badge kt-badge--warning kt-badge--rounded statussize hideclass">Draft</span>
                    <span class="staApp kt-badge kt-badge--success kt-badge--rounded statussize hideclass" style="background: #1eb7ae;">Approved</span>
                    <span class="staRej kt-badge kt-badge--danger kt-badge--rounded statussize hideclass" style="background: #ea6861;">Rejected</span>
                </div>
            </div>
            
            <div class="form-group row">
                <label for="example-text-input" class="col-3 col-form-label">Notes</label>
                <div class="col-9">
                    <textarea class="form-control" rows="3" id="pldNotes" readonly="" style="background: #f8f8f8"></textarea>
                </div>
            </div>
            
            <div class="form-group row hideclass layValiRemark">
                <label for="example-text-input" class="col-3 col-form-label">Validator Remarks</label>
                <div class="col-9">
                    <textarea class="form-control" rows="3" id="pldRemark" readonly="" style="background: #f8f8f8"></textarea>
                </div>
            </div>
            
            <div class="form-group row layCreate">
                <label for="example-text-input" class="col-3 col-form-label">State</label>
                <div class="col-9">
                    <div class="kt-radio-inline">
						<label class="kt-radio">
							<input type="radio" name="radio2" value="true" id="radioA" disabled> Active
							<span></span>
						</label>
						<label class="kt-radio">
							<input type="radio" name="radio2" value="false" id="radioI" checked="checked" disabled> Inactive
							<span></span>
						</label>
					</div>
                </div>
            </div>
			<div class="form-group row ">
				<div class="col-3">
					<label>Version Control</label></div>
				<div class="col-9">
					<label id="txtVersionPlaybook">Version 1</label>
				</div>
			</div>
        </div>
    </div>
    <div class="col-md-12 row">
        <div class="col-md-7">
        </div>
        <div class="col-md-5 textright">
        	<div class="viewNormal">
            	<button type="button" class="btn btn-cancel btn-hover-brand" id="btnBackToHistory">
            		<em class="la la-times-circle"></em>Cancel</button>
				<button type="button" class="btn btn-add-default" id="btnRestore" th:if="${#strings.contains(session.userProfile.permission, 'RESTORE_HISTORICAL_PLAYBOOK')}">
					<em class="la la-history"></em>Restore</button>
        	</div>
        </div>
    </div>
</div>

	</div>
	<!-- end:: Content -->

</div>

<div class="modal" id="addPlaybookConfirmation" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">ï¿½</span>
                </button>
            </div>
            <div class="modal-body">
            	<div th:replace="custom/status/status"></div>
                <div class="col-md-12">You're processing to create new Playbook with details information as below:</div>

                <div class="col-md-12">
					<div class="row">
						<div class="col-3 col-form-label">Playbook Name</div>
						<div class="col-9 col-form-label" id="reName"></div>
					</div>
					<div class="row">
						<div class="col-3 col-form-label">Playbook Content</div>
						<div class="col-9 col-form-label" id="reFile"></div>
					</div>
					<div class="row" style="height:15em; margin-bottom:15px">
						<div class="col-12 col-form-label">
							<textarea class="form-control" rows="3" id="reFileContent" style="height:100%"></textarea>
						</div>
					</div>
					<div class="row">
						<div class="col-2 col-form-label">Playbook Input</div>
						<div class="col-9 col-form-label">
							<table class="table" id="tblResultResponse" style="border:1px solid #ccc!important">
                                <caption class="d-none"></caption>
		                        <thead style="background:#ccc!important">
		                            <tr>
		                                <th scope="col" style="width:20%" class="text-center">Input Type</th>
		                                <th scope="col" style="width:30%" class="text-center">Variable</th>
		                                <th scope="col" style="width:30%" class="text-center">Value</th>
		                                <th scope="col" style="width:20%" class="text-center">Mandatory</th>
		                            </tr>
		                        </thead>
		                        <tbody></tbody>
		                    </table>
						</div>
					</div>
					<div class="row">
						<div class="col-2 col-form-label">Playbook Output</div>
						<div class="col-9 col-form-label">
							<table class="table" id="tblResultOuput" style="border:1px solid #ccc!important">
                                <caption class="d-none"></caption>
		                        <thead style="background:#ccc!important">
		                            <tr>
		                                <th scope="col" style="width:50%" class="text-center">Variable</th>
		                                <th scope="col" style="width:50%" class="text-center">Value</th>
		                            </tr>
		                        </thead>
		                        <tbody></tbody>
		                    </table>
						</div>
					</div>
                </div>
                
                <div class="col-md-12">By clicking on "Create", Playbook will be created in the system and pending for the approval.</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-add-default" id="btnResultResponse">Confirm</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="kt_modal_restore" tabindex="-1"
     role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div style="display: none;">
                    <input value="" id="historyId">
                </div>
                <p>Are you sure you want to restore to the previous version?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">No</button>
                <button type="button" class="btn btn-primary" id="btnYesRestore">Yes</button>
            </div>
        </div>
    </div>
</div>

<div th:replace="common/footer"></div>

